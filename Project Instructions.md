### **Objective**:
We are building an automated media monitoring tool designed to help clients track how they are being represented in the media. The tool automates the process of searching for specific keywords in newspaper articles, which is currently done manually. It uses the **Gemini 1.5 Flash model** to process e-newspapers (PDFs) and return relevant responses based on client-specific keywords.

### **Key Features**:

1. **PDF Upload with Metadata**:
   - The user can upload PDFs of newspapers and provide additional metadata such as:
     - **Publication Name**: The name of the newspaper (e.g., Times of India).
     - **Edition**: The specific edition of the newspaper (e.g., Chandigarh, Ahmedabad, Pune).
     - **Date**: The date corresponding to the newspaper edition (provided by the user).

2. **PDF Page Extraction**:
   - The system extracts individual pages from the uploaded PDFs and converts them into **image** format.
   - For each page, a unique **ID** is generated by concatenating the **Source** (PDF file name) and the **Page Number**.
   - Each page is associated with the following metadata:
     - **Source**: The PDF file name.
     - **Publication Name**: Provided by the user during upload.
     - **Edition**: Provided by the user during upload.
     - **Date**: Provided by the user during upload.
     - **Page Number**: The page number within the PDF.
     - **ID**: Concatenation of Source and Page Number.

3. **Client and Keywords Management**:
   - The user can **add clients** through the interface.
   - Each client will have a set of **keywords** attached to them, which will be used to search through the uploaded newspaper pages.
   - Keywords for each client will be saved in the database, and can be updated or removed as needed.

4. **Query Processing**:
   - Users can input a query based on the client and the keywords associated with them.
   - The system will automatically include a **system prompt** in the query (e.g., "Can you find any article on the page with the following keywords?") and append the client-specific keywords to the query.
   - Each query is processed against one page at a time, sending the **page image** and associated metadata to the Gemini 1.5 Flash model to retrieve a relevant response.
   - The **page ID** is used to associate each page's respective response.

5. **Keyword Matching and Response**:
   - The response from the Gemini API indicates whether any of the keywords were found on the page.
   - The response includes:
     - **Retrieval status**: Whether a match was found (true/false).
     - **Matching keywords**: A list of keywords found on the page.
     - **Article headline** and **summary**: Information extracted from the article if a match is found.

6. **Delayed API Submission with Rate-Limiting**:
   - Pages are **not** immediately sent to the Gemini API after upload. Instead, they are sent when the user submits a query for a client.
   - Due to the free-tier rate limit of **15 requests per minute**, the system will:
     - Send the **first 15 images** (one per request) in parallel with the query.
     - Wait for **one minute** before sending the next batch of 15 images.
     - This process will continue until all pages are processed.

7. **Multi-modal Processing**:
   - The system leverages the multi-modal capability of the **Gemini 1.5 Flash model** to process images of newspaper pages, enabling it to "see" and "read" the content (e.g., tables, images, text) on each page.

8. **Stage 1 Focus**:
   - In Stage 1, the system will query **multiple editions** of a single publication. For example, querying all relevant pages from the **Times of India** across different editions (e.g., Chandigarh, Ahmedabad, Pune) based on the client's keywords.
   - Each edition's pages will have their own response, identified by their **page ID**.

### **Development Components**:

1. **Backend**:
   - **PDF Upload API**: Create an endpoint that accepts PDF uploads along with user-provided metadata (Publication Name, Edition, Date).
   - **Client & Keyword Management**: Implement functionality to add and manage clients and the keywords associated with each client.
   - **Page Extraction & Metadata**: Implement logic to extract individual pages, convert them into images, and associate each page with its metadata and unique ID.
   - **Query API**: Develop an API that accepts user queries based on clients and their keywords, sends individual page images with their metadata to the Gemini API, and returns a relevant response.
   - Implement rate-limited batch processing for queries (15 requests per minute).

2. **Frontend**:
   - A simple UI allowing users to:
     - Upload PDFs and provide metadata (Publication Name, Edition, Date).
     - Manage clients and assign keywords to them.
     - Input queries based on the selected client and their keywords.
     - View the results of the queries, with responses associated with the corresponding page IDs.

3. **Model Integration**:
   - Integrate the **Gemini 1.5 Flash model** to handle multi-modal document processing (images of newspaper pages).
   - Use the code from `Gemini_PDF.ipynb` for interacting with the Gemini API, ensuring that each page image and its metadata are sent to the model for querying.

### **Initial Testing**:
For initial testing:
   - Process **one query at a time**, focusing on querying individual pages extracted from multiple newspaper editions.
   - Ensure that rate limits are respected and that responses are correctly associated with their respective page IDs.